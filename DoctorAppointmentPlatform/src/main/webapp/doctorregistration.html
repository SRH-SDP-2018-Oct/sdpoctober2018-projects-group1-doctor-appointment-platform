<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="ISO-8859-1" />
</head>
<style>
div.solid {
	border-style: solid;
	background-color: #abcdef;
	width: 20%;
	height: 30%;
	overflow: scroll;
}

table, th, td {
	border: 1px solid grey;
	border-collapse: collapse;
	padding: 5px;
}

table tr:nth-child(odd) {
	background-color: #f1f1f1;
}

table tr:nth-child(even) {
	background-color: #ffffff;
}
</style>
<script
	src="https://ajax.googleapis.com/ajax/libs/angularjs/1.6.9/angular.min.js"></script>
<body>
	<div data-ng-app="myApp" data-ng-controller="formCtrl">
		<form name="myForm">
			<label> Last Name: <input type="text" name="lastname"
				ng-model="lastname" required>
			</label> <br /> 
			<label> First Name: <input type="text"
				name="firstname" ng-model="firstname" required>
			</label> <br /> 
			<label> Street Address: <input type="text"
				name="doctorsteetaddress" ng-model="doctorsteetaddress" required>
			</label> <br /> 
			<label> Area Address: <input type="text"
				name="doctorareaaddress" ng-model="doctorareaaddress" required>
			</label> <br /> 
			<label> Postal Code: <input type="number"
				name="doctorpostalcode" ng-model="doctorpostalcode" required
				min="10000" max="999999">
			</label> <br /> 
			City: <select ng-model="doctorcity"
				ng-options="x.cityName for x in citynames">
				<option value="">--SelectCity--</option>
			</select> <br /> 
			<label> Email: <input type="email"
				name="doctoremail" ng-model="doctoremail" required>
			</label> <br /> 
			<label> Contact: <input type="number"
				name="doctorcontact" ng-model="doctorcontact" required>
			</label> <br /> 
			<label> Password: <input type="password"
				name="doctorpassword" ng-model="doctorpassword" required>
			</label> <br /> 
			<label> Fees: <input type="number"
				name="doctorfees" ng-model="doctorfees" required>
			</label> <br /> 
			Type: <select ng-model="doctorType"
				ng-options="x.doctorTypeName for x in doctortypes">
				<option value="">--Select Doctor Type--</option>
			</select> <br />
			<label> Experience: <input type="text"
				name="doctorfees" ng-model="doctorexperience" required>
			</label> <br />
			<br/>
			<p>Availability</p>
			<table>
				<th>Day</th>
				<th>Slot1</th>
				<th>Slot2</th>
				<th>Slot3</th>
				<th>Slot4</th>
				<th>Slot5</th>
				<th>Slot6</th>
				<th>Slot7</th>
				<th>Slot8</th>
				<th>Slot9</th>
				<th>Slot10</th>
				<th>Slot11</th>
				<th>Slot12</th>
				
				<tr ><td>
					<label><input type="checkbox" ng-init="checked=false"
								ng-model="sundaySlot0">sunday: 
					</label>
					</td>
					<td><input type="checkbox"ng-model="sundaySlot1"></td>
					<td><input type="checkbox"ng-model="sundaySlot2"></td>
					<td><input type="checkbox"ng-model="sundaySlot3"></td>
					<td><input type="checkbox"ng-model="sundaySlot4"></td>
					<td><input type="checkbox"ng-model="sundaySlot5"></td>
					<td><input type="checkbox"ng-model="sundaySlot6"></td>
					<td><input type="checkbox"ng-model="sundaySlot7"></td>
					<td><input type="checkbox"ng-model="sundaySlot8"></td>
					<td><input type="checkbox"ng-model="sundaySlot9"></td>
					<td><input type="checkbox"ng-model="sundaySlot10"></td>
					<td><input type="checkbox"ng-model="sundaySlot11"></td>
					<td><input type="checkbox"ng-model="sundaySlot12"></td>
					
				</tr>
				<tr ><td>
					<label><input type="checkbox" ng-init="checked=false"
								ng-model="mondaySlot0">monday: 
					</label>
				</td>
				<td><input type="checkbox"ng-model="mondaySlot0"></td>
					<td><input type="checkbox"ng-model="mondaySlot2"></td>
					<td><input type="checkbox"ng-model="mondaySlot3"></td>
					<td><input type="checkbox"ng-model="mondaySlot4"></td>
					<td><input type="checkbox"ng-model="mondaySlot5"></td>
					<td><input type="checkbox"ng-model="mondaySlot6"></td>
					<td><input type="checkbox"ng-model="mondaySlot7"></td>
					<td><input type="checkbox"ng-model="mondaySlot8"></td>
					<td><input type="checkbox"ng-model="mondaySlot9"></td>
					<td><input type="checkbox"ng-model="mondaySlot10"></td>
					<td><input type="checkbox"ng-model="mondaySlot11"></td>
					<td><input type="checkbox"ng-model="mondaySlot12"></td>
				</tr>
				<tr ><td>
					<label><input type="checkbox" ng-init="checked=false"
								ng-model="tuesdaySlot0">tuesday: 
					</label>
				</td>
				<td><input type="checkbox"ng-model="tuesdaySlot1"></td>
					<td><input type="checkbox"ng-model="tuesdaySlot2"></td>
					<td><input type="checkbox"ng-model="tuesdaySlot3"></td>
					<td><input type="checkbox"ng-model="tuesdaySlot4"></td>
					<td><input type="checkbox"ng-model="tuesdaySlot5"></td>
					<td><input type="checkbox"ng-model="tuesdaySlot6"></td>
					<td><input type="checkbox"ng-model="tuesdaySlot7"></td>
					<td><input type="checkbox"ng-model="tuesdaySlot8"></td>
					<td><input type="checkbox"ng-model="tuesdaySlot9"></td>
					<td><input type="checkbox"ng-model="tuesdaySlot10"></td>
					<td><input type="checkbox"ng-model="tuesdaySlot11"></td>
					<td><input type="checkbox"ng-model="tuesdaySlot12"></td>
				</tr>
				<tr ><td>
					<label><input type="checkbox" ng-init="checked=false"
								ng-model="wednesdaySlot0">wednesday: 
					</label>
				</td>
				<td><input type="checkbox"ng-model="wednesdaySlot1"></td>
					<td><input type="checkbox"ng-model="wednesdaySlot2"></td>
					<td><input type="checkbox"ng-model="wednesdaySlot3"></td>
					<td><input type="checkbox"ng-model="wednesdaySlot4"></td>
					<td><input type="checkbox"ng-model="wednesdaySlot5"></td>
					<td><input type="checkbox"ng-model="wednesdaySlot6"></td>
					<td><input type="checkbox"ng-model="wednesdaySlot7"></td>
					<td><input type="checkbox"ng-model="wednesdaySlot8"></td>
					<td><input type="checkbox"ng-model="wednesdaySlot9"></td>
					<td><input type="checkbox"ng-model="wednesdaySlot10"></td>
					<td><input type="checkbox"ng-model="wednesdaySlot11"></td>
					<td><input type="checkbox"ng-model="wednesdaySlot12"></td>
				</tr>
				<tr ><td>
					<label><input type="checkbox" ng-init="checked=false"
								ng-model="thursdaySlot0">thursday: 
					</label>
				</td>
				<td><input type="checkbox"ng-model="thursdaySlot1"></td>
					<td><input type="checkbox"ng-model="thursdaySlot2"></td>
					<td><input type="checkbox"ng-model="thursdaySlot3"></td>
					<td><input type="checkbox"ng-model="thursdaySlot4"></td>
					<td><input type="checkbox"ng-model="thursdaySlot5"></td>
					<td><input type="checkbox"ng-model="thursdaySlot6"></td>
					<td><input type="checkbox"ng-model="thursdaySlot7"></td>
					<td><input type="checkbox"ng-model="thursdaySlot8"></td>
					<td><input type="checkbox"ng-model="thursdaySlot9"></td>
					<td><input type="checkbox"ng-model="thursdaySlot10"></td>
					<td><input type="checkbox"ng-model="thursdaySlot11"></td>
					<td><input type="checkbox"ng-model="thursdaySlot12"></td>
				</tr>
				<tr ><td>
					<label><input type="checkbox" ng-init="checked=false"
								ng-model="fridaySlot0">friday: 
					</label>
				</td>
				<td><input type="checkbox"ng-model="fridaySlot1"></td>
					<td><input type="checkbox"ng-model="fridaySlot2"></td>
					<td><input type="checkbox"ng-model="fridaySlot3"></td>
					<td><input type="checkbox"ng-model="fridaySlot4"></td>
					<td><input type="checkbox"ng-model="fridaySlot5"></td>
					<td><input type="checkbox"ng-model="fridaySlot6"></td>
					<td><input type="checkbox"ng-model="fridaySlot7"></td>
					<td><input type="checkbox"ng-model="fridaySlot8"></td>
					<td><input type="checkbox"ng-model="fridaySlot9"></td>
					<td><input type="checkbox"ng-model="fridaySlot10"></td>
					<td><input type="checkbox"ng-model="fridaySlot11"></td>
					<td><input type="checkbox"ng-model="fridaySlot12"></td>
				</tr>
				<tr ><td>
					<label><input type="checkbox" ng-init="checked=false"
								ng-model="saturdaySlot0">saturday: 
					</label>
				</td>
				<td><input type="checkbox"ng-model="saturdaySlot1"></td>
					<td><input type="checkbox"ng-model="saturdaySlot2"></td>
					<td><input type="checkbox"ng-model="saturdaySlot3"></td>
					<td><input type="checkbox"ng-model="saturdaySlot4"></td>
					<td><input type="checkbox"ng-model="saturdaySlot5"></td>
					<td><input type="checkbox"ng-model="saturdaySlot6"></td>
					<td><input type="checkbox"ng-model="saturdaySlot7"></td>
					<td><input type="checkbox"ng-model="saturdaySlot8"></td>
					<td><input type="checkbox"ng-model="saturdaySlot9"></td>
					<td><input type="checkbox"ng-model="saturdaySlot10"></td>
					<td><input type="checkbox"ng-model="saturdaySlot11"></td>
					<td><input type="checkbox"ng-model="saturdaySlot12"></td>
				</tr>
			</table>
		</form>
		<br/>
		<button ng-click="doctorRegistration()" type="submit">Register</button>
	</div>
	<script>
		var app = angular.module('myApp', []);
		app.controller('formCtrl', function($scope, $location, $http) {
			
			$http.get("http://localhost:8888/app/cityvault/cities")
			.then(function(response) {
				$scope.citynames = response.data;
			}, function myError(response) {
				$scope.heading += response.statusText;
			});
			
			$http.get("http://localhost:8888/app/cityvault/doctortypes")
			.then(function(response) {
				$scope.doctortypes = response.data;
			}, function myError(response) {
				$scope.heading += response.statusText;
			});
			
			$http.get("http://localhost:8888/app/cityvault/slots")
			.then(function(response) {
				$scope.slots = response.data;
			}, function myError(response) {
				$scope.heading += response.statusText;
			});
			
			$scope.doctorRegistration = function() {
				
				var registrationForm = {
						doctorLastName:$scope.lastname, 
						doctorFirstName:$scope.firstname,
						doctorSteetAddress:$scope.doctorsteetaddress,
						doctorAreaAddress:$scope.doctorareaaddress,
						doctorPostalCode:$scope.doctorpostalcode,
						doctorCity:$scope.doctorcity.cityId,
						doctorEmail:$scope.doctoremail,
						doctorContact:$scope.doctorcontact,
						doctorPassword:$scope.doctorpassword,
						doctorFees:$scope.doctorfees, 
						doctorType:$scope.doctorType.doctorTypeId,
						doctorExperience:$scope.doctorexperience,
						doctorSunday:($scope.sundaySlot0 ? true : false),
						doctorMonday:($scope.mondaySlot0 ? true : false),
						doctorTuesday:($scope.tuesdaySlot0 ? true : false),
						doctorWednesday:($scope.wednesdaySlot0 ? true : false),
						doctorThursday:($scope.thursdaySlot0 ? true : false),
						doctorFriday:($scope.fridaySlot0 ? true : false),
						doctorSaturday:($scope.saturdaySlot0 ? true : false)
					};
				
				var userreq = {
						 method: 'POST',
						 url: 'http://localhost:8888/app/cityvault/doctoruserregistration',
						 data:  JSON.stringify(registrationForm)
						}
				$http(userreq)
				.then(function(response) {
							
					/* var availabilityForm = [{
						appointmentAvailabilityDoctor:1, 
						appointmentAvailabilitySlotDay:'Sunday',
						appointmentAvailabilityDoctorType:1,
						appointmentAvailabilityDoctorCity:1,
						appointmentAvailabilitySlotTime1:true,
						appointmentAvailabilitySlotTime2:true,
						appointmentAvailabilitySlotTime3:true,
						appointmentAvailabilitySlotTime4:true,
						appointmentAvailabilitySlotTime5:true,
						appointmentAvailabilitySlotTime6:true,
						appointmentAvailabilitySlotTime7:true,
						appointmentAvailabilitySlotTime8:true,
						appointmentAvailabilitySlotTime9:true,
						appointmentAvailabilitySlotTime9:true,
						appointmentAvailabilitySlotTime10:true,
						appointmentAvailabilitySlotTime11:true,
						}];
							
							var availreq = {
									 method: 'POST',
									 url: 'http://localhost:8888/app/cityvault/doctoruserregistration/availability',
									 data:  JSON.stringify(availabilityForm)
									}
							$http(availreq)
							.then(function(response) {
										alert("Registration Successful");
										
										
									},
									function myError(response) {
										alert("bekar");
										$scope.heading += response.statusText;
									}); */
									
							window.location = "http://localhost:8888/app/appointmentbookingapp/doctordashboard";
						},
						function myError(response) {
							alert("bekar");
							$scope.heading += response.statusText;
						});
			};
			
		});
	</script>
</body>
</html>